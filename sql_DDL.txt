DDL
CREATE TABLE EMPLOYEE ( 
EMPLOYEE_ID CHAR(9) NOT NULL,
FIRST_NAME VARCHAR(50) NOT NULL,
LAST_NAME VARCHAR(50) NOT NULL,
ROLE_ID CHAR(3) NOT NULL,
DATE_HIRED DATE NOT NULL,
DATE_OF_BIRTH DATE,
CASINO_ID INT NOT NULL,
TABLE_ID VARCHAR(3),
PRIMARY KEY (EMPLOYEE_ID)
);

CREATE TABLE ROLES (
ROLE_ID CHAR(3) NOT NULL, 
ROLE_NAME VARCHAR(50) NOT NULL,
PRIMARY KEY (ROLE_ID)
);

CREATE TABLE CASINO (
CASINO_ID INT NOT NULL, 
CASINO_NAME VARCHAR(50) NOT NULL, 
LOCATION_ID BIGINT NOT NULL,
PRIMARY KEY (CASINO_ID)
);

CREATE TABLE LOCATION (
LOCATION_ID BIGINT NOT NULL, 
ADDRESS_ID BIGINT NOT NULL,
LOCATION_TYPE CHAR(2) NOT NULL,
PRIMARY KEY (LOCATION_ID)
);

CREATE TABLE LOCATION_TYPE (
LOCATION_TYPE CHAR(2) NOT NULL,
DESCRIPTION VARCHAR(120) NOT NULL,
PRIMARY KEY(LOCATION_TYPE)
);

CREATE TABLE ADDRESS (
ADDRESS_ID BIGINT NOT NULL, 
ADDRESS_TYPE CHAR(2) NOT NULL, 
ADDRESS_NAME VARCHAR(50) NOT NULL, 
ADDRESS_NUM VARCHAR(10) NOT NULL,  
ZIPCODE VARCHAR(20) NOT NULL,
COUNTRY VARCHAR (120) NOT NULL,
PRIMARY KEY (ADDRESS_ID)
);

CREATE TABLE ADDRESS_TYPE(
ADDRESS_TYPE CHAR(2) NOT NULL,
DESCRIPTION VARCHAR(120) NOT NULL,
PRIMARY KEY(ADDRESS_TYPE)
);

CREATE TABLE ZIPCODE (
ZIPCODE VARCHAR(20), 
COUNTRY VARCHAR (120), 
CITY VARCHAR(120), 
STATE VARCHAR(120),
PRIMARY KEY (ZIPCODE, COUNTRY)
);


CREATE TABLE GAMETYPE
(GAME_TYPE CHAR(1) NOT NULL,
DESCRIPTION VARCHAR(120) NOT NULL,
PRIMARY KEY (GAME_TYPE));

CREATE TABLE GAME
(GAME_ID CHAR(3) NOT NULL,
GAME_TYPE CHAR(1) NOT NULL,
GAME_NAME VARCHAR(100) NOT NULL,
MAX_PLAYERS SMALLINT NOT NULL,
MIN_BUYIN BIGINT,
PRIMARY KEY (GAME_ID),
FOREIGN KEY (GAME_TYPE) REFERENCES GAMETYPE(GAME_TYPE));

CREATE TABLE CASINO_TABLE
(TABLE_ID VARCHAR(3) NOT NULL,
GAME_ID CHAR(3) NOT NULL,
CASINO_ID INT NOT NULL,
PRIMARY KEY (TABLE_ID),
FOREIGN KEY (GAME_ID) REFERENCES GAME(GAME_ID),
FOREIGN KEY (CASINO_ID) REFERENCES CASINO(CASINO_ID));

CREATE TABLE TICKET_DRINK (
  TICKET_ID BIGINT NOT NULL PRIMARY KEY,
  TIMEPLACED TIMESTAMP NOT NULL,
  PLAYER_ID CHAR(9) NOT NULL,
  TABLE_ID VARCHAR(3) NOT NULL,
  EMPLOYEE_ID CHAR(9) NOT NULL,
  TOTAL_DRINK DECIMAL(20,2) NOT NULL,
  TOTAL_TAX DECIMAL(20,2) NOT NULL,
  TOTAL_ORDER DECIMAL (20,5) NOT NULL);
  
CREATE TABLE TICKET_LINE_DRINK (
/*ASK PROF IF WE ONLY NEED $ AMOUNTS IN THIS TABLE OR IN BOTH*/
  TICKET_ID BIGINT NOT NULL,
  NUMSEQ SMALLINT NOT NULL,
  DRINK_ID SMALLINT NOT NULL,
  DESCRIPTION VARCHAR(128),
  QUANTITY SMALLINT(6) NOT NULL,
  PRICE DECIMAL(20,2) NOT NULL,
  TAX_AMOUNT DECIMAL (20,5) NOT NULL,
  DRINK_AMOUNT DECIMAL (20,5) NOT NULL,
  PRIMARY KEY (TICKET_ID, NUMSEQ));
  
CREATE TABLE DRINKS (
  DRINK_ID SMALLINT NOT NULL PRIMARY KEY,
  DRINK_TYPE CHAR(2) NOT NULL,
  SIZE_CODE CHAR(2) NOT NULL,
  SIZE DECIMAL (10,2) NOT NULL,
  DRINK_NAME VARCHAR(40) NOT NULL,
  BRAND_ID CHAR(3) NOT NULL);
  
CREATE TABLE UNIT_MEASURES (
  SIZE_CODE CHAR(2) NOT NULL PRIMARY KEY,
  DESCRIPTION VARCHAR(128) NOT NULL);
  
CREATE TABLE DRINK_TYPES (
  DRINK_TYPE CHAR(2) NOT NULL PRIMARY KEY,
  DESCRIPTION VARCHAR(128) NOT NULL);
  
  CREATE TABLE BRANDS (
  BRAND_ID CHAR(3) NOT NULL PRIMARY KEY,
  DESCRIPTION VARCHAR(128) NOT NULL);
 

CREATE TABLE PLAYER (
	PLAYER_ID CHAR(9) NOT NULL PRIMARY KEY,
	FIRST_NAME VARCHAR (120) NOT NULL,
    LAST_NAME VARCHAR (120) NOT NULL,
    PLAYER_EMAIL VARCHAR (120) NOT NULL,
    PLAYER_PHONE VARCHAR (20) NOT NULL,
	PLAYER_PASSPORT VARCHAR (9) NOT NULL
    );
		

CREATE TABLE CASINO_TRANSACTION (
	TRANSACTION_ID BIGINT NOT NULL PRIMARY KEY,
	TRANSACTION_TYPE CHAR(2) NOT NULL,
	TOTAL_AMOUNT BIGINT NOT NULL,
	PLAYER_ID CHAR(9) NOT NULL,
    TRANSACTION_TIME TIMESTAMP NOT NULL);

CREATE TABLE TRANSACTION_TYPE (
	TRANSACTION_TYPE CHAR(2) NOT NULL PRIMARY KEY,
	TRANSACTION_DESCRIPTION VARCHAR(120) NOT NULL);

CREATE TABLE PAYMENT (
	PAYMENT_ID BIGINT NOT NULL PRIMARY KEY,
	PAYMENT_TYPE CHAR(2) NOT NULL,
	CURRENCY_TYPE CHAR(3) NOT NULL,
	TRANSACTION_ID BIGINT NOT NULL);

CREATE TABLE PAYMENT_TYPE (
	PAYMENT_TYPE CHAR(2) NOT NULL PRIMARY KEY,
	PAYMENT_DESCRIPTION VARCHAR(120) NOT NULL);	

CREATE TABLE CURRENCY_TYPE (
	CURRENCY_TYPE CHAR(3) NOT NULL PRIMARY KEY,
	CURRENCY_DESCRIPTION VARCHAR(120) NOT NULL);

CREATE TABLE STACK (
	STACK_ID BIGINT NOT NULL PRIMARY KEY,
	STACK_AMOUNT BIGINT NOT NULL,
	PLAYER_ID CHAR(9) NOT NULL);

CREATE TABLE BET (
	BET_ID BIGINT NOT NULL PRIMARY KEY,
	CHIPS_IN SMALLINT NOT NULL,
	CHIPS_OUT SMALLINT NOT NULL,
	START_TIME TIMESTAMP NOT NULL,
	END_TIME TIMESTAMP NOT NULL,
	TABLE_ID VARCHAR(3) NOT NULL,
	PLAYER_ID CHAR(9) NOT NULL);

ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (ROLE_ID)
REFERENCES ROLES (ROLE_ID);

ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (CASINO_ID)
REFERENCES CASINO (CASINO_ID);

ALTER TABLE EMPLOYEE
ADD FOREIGN KEY (TABLE_ID)
REFERENCES CASINO_TABLE (TABLE_ID);

ALTER TABLE CASINO 
ADD FOREIGN KEY (LOCATION_ID) 
REFERENCES LOCATION (LOCATION_ID);

ALTER TABLE LOCATION
ADD FOREIGN KEY (ADDRESS_ID)
REFERENCES ADDRESS (ADDRESS_ID); 

ALTER TABLE LOCATION
ADD FOREIGN KEY (LOCATION_TYPE)
REFERENCES LOCATION_TYPE (LOCATION_TYPE); 

ALTER TABLE ADDRESS
ADD FOREIGN KEY (ADDRESS_TYPE)
REFERENCES ADDRESS_TYPE (ADDRESS_TYPE); 

ALTER TABLE ADDRESS 
ADD FOREIGN KEY (ZIPCODE, COUNTRY)
REFERENCES ZIPCODE (ZIPCODE, COUNTRY);

ALTER TABLE TICKET_DRINK
ADD FOREIGN KEY (TABLE_ID)
REFERENCES CASINO_TABLE(TABLE_ID);

ALTER TABLE TICKET_LINE_DRINK
ADD FOREIGN KEY (TICKET_ID)
REFERENCES TICKET_DRINK(TICKET_ID);

ALTER TABLE TICKET_LINE_DRINK
ADD FOREIGN KEY(DRINK_ID)
REFERENCES DRINKS (DRINK_ID);

ALTER TABLE DRINKS
ADD FOREIGN KEY (SIZE_CODE)
REFERENCES UNIT_MEASURES (SIZE_CODE);

ALTER TABLE DRINKS
ADD FOREIGN KEY (DRINK_TYPE)
REFERENCES DRINK_TYPES (DRINK_TYPE);

ALTER TABLE DRINKS
ADD FOREIGN KEY (BRAND_ID)
REFERENCES BRANDS (BRAND_ID);

ALTER TABLE CASINO_TRANSACTION
ADD FOREIGN KEY (PLAYER_ID)
REFERENCES PLAYER(PLAYER_ID);

ALTER TABLE CASINO_TRANSACTION
ADD FOREIGN KEY (TRANSACTION_TYPE)
REFERENCES TRANSACTION_TYPE(TRANSACTION_TYPE);

ALTER TABLE PAYMENT
ADD FOREIGN KEY (TRANSACTION_ID)
REFERENCES CASINO_TRANSACTION(TRANSACTION_ID);

ALTER TABLE PAYMENT
ADD FOREIGN KEY (PAYMENT_TYPE)
REFERENCES PAYMENT_TYPE(PAYMENT_TYPE);

ALTER TABLE PAYMENT
ADD FOREIGN KEY (CURRENCY_TYPE)
REFERENCES CURRENCY_TYPE(CURRENCY_TYPE);

ALTER TABLE STACK
ADD FOREIGN KEY (PLAYER_ID)
REFERENCES PLAYER(PLAYER_ID);

ALTER TABLE BET
ADD FOREIGN KEY (TABLE_ID)
REFERENCES CASINO_TABLE(TABLE_ID);

ALTER TABLE BET
ADD FOREIGN KEY (PLAYER_ID)
REFERENCES PLAYER(PLAYER_ID);
